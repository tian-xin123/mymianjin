import{t as e}from"./request-_JOEXu8t.js";import{A as t,C as n,D as r,M as i,O as a,S as o,T as s,_ as c,b as l,d as u,g as d,h as f,k as p,n as m,o as h,s as g,v as _,x as v,y}from"./index-EUzX2dG9.js";var b={class:`user-container`},x={class:`user-header`},S={class:`avatar-section`},C={key:1,class:`avatar placeholder-avatar`},w={class:`user-info-section`},T={class:`user-name`},E={class:`user-joined`},D={class:`user-functions`},O={class:`function-item`},k={class:`function-item`},A={class:`function-item`},j={class:`user-info-list`},M={class:`user-actions`},N=g(o({__name:`UserView`,setup(o){let g=h(),N=p(null),P=p(!0),F=async()=>{try{P.value=!0;let t=await e.get(`/auth/currentUser`,{headers:{Authorization:m()}});t.data.code===1e4?N.value=t.data.data:u(`获取用户信息失败`)}catch(e){console.error(`获取用户信息失败:`,e),u(`网络错误，请重试`),g.push(`/login`)}finally{P.value=!1}};n(()=>{F()});let I=()=>{localStorage.removeItem(`token`),u(`退出登录成功`),g.push(`/login`)};return(e,n)=>{let o=r(`van-image`),u=r(`van-cell`),p=r(`van-cell-group`),m=r(`van-button`),h=r(`van-loading`);return s(),_(`div`,b,[f(`div`,x,[f(`div`,S,[N.value?.avatar?(s(),d(o,{key:0,src:N.value.avatar,fit:`cover`,class:`avatar`},null,8,[`src`])):(s(),_(`div`,C,i(N.value?.name?.charAt(0)||`U`),1))]),f(`div`,w,[f(`h2`,T,i(N.value?.username||`未知用户`),1),f(`p`,E,`注册时间: `+i(N.value?.createdAt||``),1)])]),f(`div`,D,[f(`div`,O,[f(`div`,{class:`function-icon`,onClick:n[0]||=e=>t(g).push(`/`)},[...n[3]||=[y(`<svg width="40" height="40" viewBox="0 0 40 40" fill="none" data-v-cbba1495><circle cx="20" cy="20" r="18" stroke="#999" stroke-width="2" data-v-cbba1495></circle><path d="M14 10H26V14H14V10Z" fill="#999" data-v-cbba1495></path><path d="M14 18H26V22H14V18Z" fill="#999" data-v-cbba1495></path><path d="M14 26H20V30H14V26Z" fill="#999" data-v-cbba1495></path></svg>`,1)]]),n[4]||=f(`div`,{class:`function-name`},`历史记录`,-1)]),f(`div`,k,[f(`div`,{class:`function-icon`,onClick:n[1]||=e=>t(g).push(`/collect`)},[...n[5]||=[f(`svg`,{width:`40`,height:`40`,viewBox:`0 0 40 40`,fill:`none`},[f(`circle`,{cx:`20`,cy:`20`,r:`18`,stroke:`#999`,"stroke-width":`2`}),f(`path`,{d:`M12 16L18 22L28 12`,stroke:`#999`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`})],-1)]]),n[6]||=f(`div`,{class:`function-name`},`我的收藏`,-1)]),f(`div`,A,[f(`div`,{class:`function-icon`,onClick:n[2]||=e=>t(g).push(`/like`)},[...n[7]||=[f(`svg`,{width:`40`,height:`40`,viewBox:`0 0 40 40`,fill:`none`},[f(`circle`,{cx:`20`,cy:`20`,r:`18`,stroke:`#999`,"stroke-width":`2`}),f(`path`,{d:`M20 26C20 26 26 22 26 16C26 12 23 10 20 10C17 10 14 12 14 16C14 22 20 26 20 26Z`,fill:`#999`})],-1)]]),n[8]||=f(`div`,{class:`function-name`},`我的点赞`,-1)])]),f(`div`,j,[v(p,{inset:``},{default:a(()=>[v(u,{title:`用户ID`,value:N.value?.id||`-`},null,8,[`value`]),v(u,{title:`用户名`,value:N.value?.username||`-`},null,8,[`value`]),v(u,{title:`最后更新`,value:N.value?.updatedAt||`-`},null,8,[`value`])]),_:1})]),f(`div`,M,[v(m,{type:`danger`,block:``,onClick:I},{default:a(()=>[...n[9]||=[l(`退出登录`,-1)]]),_:1})]),P.value?(s(),d(h,{key:0,type:`spinner`,size:`40px`})):c(``,!0)])}}}),[[`__scopeId`,`data-v-cbba1495`]]);export{N as default};